<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0" name="viewport">

    <!-- 카카오톡 썸네일 노출 메타태그 -->
    <meta property="og:url" content="https://play.google.com/store/apps/details?id=com.koco.oi_android&hl=ko&gl=US">
    <meta property="og:title" content="오이, 아이폰앱 출시!">
    <meta property="og:image" content="/appPages/images/thunmnail_launchAppStore.png">
    <meta property="og:description" content="다운로드 링크를 공유해보세요">

    <link rel="shortcut icon" href="/images/img_oe.svg">
    <title>오이 - 오십대들의 이야기</title>
    <link rel="stylesheet" href="/css/common.css">

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-219972956-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-219972956-1');
    </script>

    <!-- 구글 에드센스 광고 -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7162501071654020"
    crossorigin="anonymous"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // referrer를 통해 사용자가 어디서 왔는지 확인합니다.
            var referrer = document.referrer;
            
            if (referrer && referrer !== window.location.href) {
                // 내부에서 이동한 경우
                closeModal();
            } else {
                // 외부에서 이동해온 경우
            }
        });
        // 모달을 닫는 함수
        function closeModal() {
            var modals = document.getElementsByClassName('js_modal_fingerGesture');
            for (var i = 0; i < modals.length; i++) {
                modals[i].style.display = 'none';
            }
        }
    </script>
    
</head>

<body>

    <div class="bl_lightModal js_modal_fingerGesture">
        <section class="bl_lightModal_header">
            <i class="ic_cancel_lightGray el_icSize_48"></i>
        </section>
        <section class="bl_lightModal_body">
            <img class="bl_lightModal_body_img" src="/appPages/images/il__fingerGesture.png" alt="손가락 제스처 이미지">
            <p class="bl_lightModal_body_txt">화면을 밀어보세요</p>
        </section>
    </div>

    <div class="bl_fullScreenCarousel hp_bgLightGray js_fullScreenCarousel">
        <section class="bl_fullScreenCarousel_item __intro">
            <div class="bl_fullScreenCarousel_panel">
                <img class="bl_fullScreenCarousel_panel_img" src="/appPages/images/il_apple.png" alt="애플 로고">
                <h1 class="bl_fullScreenCarousel_panel_ttl">아이폰에서도<br>만나요</h1>
            </div>
        </section>
        <section class="bl_fullScreenCarousel_item">
            <div class="bl_fullScreenCarousel_panel">
                <h1 class="bl_fullScreenCarousel_panel_ttl">이제 <span class="hp_colorGreen">아이폰</span>에서도<br>오이를 쓸 수 있어요</h1>
                <img class="bl_fullScreenCarousel_panel_img" src="/appPages/images/img_launchAppStore.png" alt="앱 스토어 이미지">
            </div>
            <button class="bl_fullScreenCarousel_mainBtn">
                <i class="ic_kakao_chat el_icSize_24"></i>
                <p>다운로드 링크 공유하기</p>
            </button>
        </section>
        <article class="bl_fullScreenCarousel_indicator">
        </article>
    </div>

    <script>       
        const carousel = document.querySelector('.bl_fullScreenCarousel');
        const indicatorContainer = document.querySelector('.bl_fullScreenCarousel_indicator');

        // 아이템 개수만큼 인디케이터 추가
        const carouselItems = document.querySelectorAll('.bl_fullScreenCarousel_item');
        carouselItems.forEach((_, index) => {
            const indicator = document.createElement('i');
            indicator.classList.add('bl_fullScreenCarousel_indicator_item');
            if (index === 0) {
                indicator.classList.add('__on');
            }
            indicatorContainer.appendChild(indicator);
        });

        carousel.addEventListener('scroll', () => {
            const scrollPosition = carousel.scrollLeft;
            const itemWidth = carouselItems[0].offsetWidth;
            const currentItemIndex = Math.round(scrollPosition / itemWidth);
            const indicators = document.querySelectorAll('.bl_fullScreenCarousel_indicator_item');
            indicators.forEach((indicator, index) => {
                indicator.classList.toggle('__on', index === currentItemIndex);
            });
        });
    </script>

    <!-- 모달 관련 JavaScript -->
    <script>

        // 모달을 보여주는 함수
        function showModal() {
            var modals = document.getElementsByClassName('js_modal_fingerGesture');
            for (var i = 0; i < modals.length; i++) {
                modals[i].style.display = 'block';
            }
        }

        // 모달에 클릭 이벤트 추가
        document.addEventListener('DOMContentLoaded', function() {
            var modalElements = document.querySelectorAll('.js_modal_fingerGesture');
            modalElements.forEach(function(modal) {
                modal.addEventListener('click', function() {
                    closeModal(); // 모달 클릭하면 닫음
                });
            });
        });

        // 모달에 슬라이드 제스처시 닫게 함
        document.addEventListener('DOMContentLoaded', function() {
            var modalElements = document.querySelectorAll('.js_modal_fingerGesture');
            modalElements.forEach(function(modal) {
                var startX, startY; // 슬라이드 시작 지점
                var threshold = 20; // 슬라이드로 인식할 최소 이동 거리

                // 터치 시작 이벤트
                modal.addEventListener('touchstart', function(e) {
                    startX = e.touches[0].clientX;
                    startY = e.touches[0].clientY; // Y 축 시작 지점 추가
                });

                // 터치 종료 이벤트
                modal.addEventListener('touchend', function(e) {
                    var endX = e.changedTouches[0].clientX;
                    var endY = e.changedTouches[0].clientY;

                    // 이동 거리 계산
                    var deltaX = Math.abs(endX - startX);
                    var deltaY = Math.abs(endY - startY);

                    // 좌우 또는 상하 슬라이드 판단
                    if (deltaX > threshold || deltaY > threshold) {
                        closeModal(); // 모달 닫기
                    }
                });
            });
        });


        // 특정 브라우저에서 모달 뒤에서 슬라이드 되는 현상 막기
        // 타겟 요소와 관찰자 생성
        var modalElement = document.querySelector('.js_modal_fingerGesture');
        var carouselElement = document.querySelector('.js_fullScreenCarousel');

        var observer = new MutationObserver(function(mutationsList) {
            for (var mutation of mutationsList) {
                if (mutation.type === 'attributes' && mutation.attributeName === 'style') {
                    // js_modal_fingerGesture의 display 속성이 변경될 때마다 실행됨
                    if (window.getComputedStyle(modalElement).display === 'none') {
                        // 모달이 숨겨진 경우 overflow-x를 auto로 변경
                        carouselElement.style.overflowX = 'auto';
                    } else {
                        // 모달이 보여지는 경우 overflow-x를 hidden으로 변경
                        carouselElement.style.overflowX = 'hidden';
                    }
                }
            }
        });

        // 모달 요소의 스타일 변경을 감시
        var observerConfig = {
            attributes: true, // 속성 변경 감지
            attributeFilter: ['style'], // style 속성 변경만 감지
            attributeOldValue: true // 변경 전의 속성 값 반환
        };

        observer.observe(modalElement, observerConfig);




    </script>



</body>


</html>